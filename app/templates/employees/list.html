{% extends "base.html" %} {% block title %}All Employees - Employee Management
System{% endblock %} {% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <h2><i class="fas fa-users"></i> All Employees</h2>
  <a href="{{ url_for('main.create_employee') }}" class="btn btn-success">
    <i class="fas fa-plus"></i> Add New Employee
  </a>
</div>

{% if employees %}
<div class="card">
  <div class="card-body">
    <div class="table-responsive">
      <table class="table table-hover">
        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Department</th>
            <th>Salary</th>
            <th>Hire Date</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for employee in employees %}
          <tr>
            <td>{{ employee.id }}</td>
            <td>{{ employee.name }}</td>
            <td>
              {% if employee.department %}
              <span class="badge bg-primary"
                >{{ employee.department.name }}</span
              >
              {% else %}
              <span class="text-muted">No Department</span>
              {% endif %}
            </td>
            <td>
              {% if employee.salary %} ${{ "{:,.2f}".format(employee.salary) }}
              {% else %}
              <span class="text-muted">Not Set</span>
              {% endif %}
            </td>
            <td>{{ employee.hire_date or 'Not Set' }}</td>
            <td>
              <div class="btn-group" role="group">
                <a
                  href="{{ url_for('main.edit_employee', employee_id=employee.id) }}"
                  class="btn btn-sm btn-outline-primary"
                  title="Edit"
                >
                  <i class="fas fa-edit"></i>
                </a>
                <button
                  type="button"
                  class="btn btn-sm btn-outline-danger"
                  onclick="confirmDelete({{ employee.id }}, '{{ employee.name }}')"
                  title="Delete"
                >
                  <i class="fas fa-trash"></i>
                </button>
              </div>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Confirm Delete</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
        ></button>
      </div>
      <div class="modal-body">
        <p>
          Are you sure you want to delete employee
          <strong id="employeeName"></strong>?
        </p>
        <p class="text-danger"><small>This action cannot be undone.</small></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Cancel
        </button>
        <form id="deleteForm" method="POST" style="display: inline">
          <button type="submit" class="btn btn-danger">Delete</button>
        </form>
      </div>
    </div>
  </div>
</div>

{% else %}
<div class="text-center py-5">
  <i class="fas fa-users fa-5x text-muted mb-3"></i>
  <h4 class="text-muted">No employees found</h4>
  <p class="text-muted">Get started by adding your first employee.</p>
  <a href="{{ url_for('main.create_employee') }}" class="btn btn-primary">
    <i class="fas fa-plus"></i> Add First Employee
  </a>
</div>
{% endif %} {% endblock %} {% block scripts %}
<script>
  function confirmDelete(employeeId, employeeName) {
    document.getElementById("employeeName").textContent = employeeName;
    document.getElementById("deleteForm").action =
      "{{ url_for('main.delete_employee', employee_id=0) }}".replace(
        "0",
        employeeId
      );
    new bootstrap.Modal(document.getElementById("deleteModal")).show();
  }
</script>
{% endblock %}
